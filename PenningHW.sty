
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{PenningNotes, tcolorbox, xcolor, amsfonts, amsthm, amsmath, physics}

\RequirePackage{amsfonts}
\RequirePackage{amsthm}
\RequirePackage{amsmath}
\RequirePackage[dvipsnames]{xcolor}
\RequirePackage[breakable, skins]{tcolorbox}
\RequirePackage{physics}
\RequirePackage{amssymb}

%\newcommand{\abs}[1]{\left|#1\right|}
%\newcommand{\norm}[1]{\lVert#1\rVert}

% Make ref footnote based on:
% https://tex.stackexchange.com/questions/30720/footnote-without-a-marker

\usepackage{lipsum}
\colorlet{colexam}{red!75!black}





\newtcolorbox[]{newProblemBLANK}[2]{% 1 = color; 2 = title
	empty,
	title= #2,
	%detach title,
	attach boxed title to top left,
	boxed title style={
		empty,
		size=minimal,
		toprule=2pt,
		top=4pt,
		bottom=4pt,
		%overlay={
		%	\draw
		%		[#1,line width=2pt]
		%		([yshift=-1pt]frame.north west)--([yshift=-1pt]frame.north east);
		%	}
	},
	coltitle=#1,
	colupper=#1,
	fonttitle=\Large\bfseries,
	before=\par\medskip\noindent,
	parbox=false,
	boxsep=0pt,
	left=0pt,
	right=3mm,
	top=4pt,
	breakable,
	pad at break*=0mm,
	vfill before first,
	overlay unbroken={ %add if unbroken
		\draw
			[#1,line width=1pt]
			([xshift=-0.5pt,yshift=-1pt]title.north-|frame.east)
			--([xshift=-0.5pt]frame.south east)--(frame.south west); 
	},
	overlay first={
		\draw
			[#1,line width=1pt]
			([xshift=-0.5pt,yshift=-1pt]title.north-|frame.east)
			--([xshift=-0.5pt]frame.south east); 
		},
	overlay middle={ %to be added to middle parts of broken sequence
		\draw
			[#1,line width=1pt]
			([xshift=-0.5pt]frame.north east)
			--([xshift=-0.5pt]frame.south east); 
	},
	overlay last={ %add to last part of broken sequence
		\draw[#1,line width=1pt] ([xshift=-0.5pt]frame.north east)
		--([xshift=-0.5pt]frame.south east)--(frame.south west);
	},%
}


\newtcolorbox[]{newInlineProblemBLANK}[2]{% 1 = color; 2 = title
	empty,
	title= #2,
	attach title to upper,
	after title =\ \ ,
	coltitle=#1,
	colupper=#1,
	fonttitle=\normalsize\bfseries,
	before=\par\medskip\noindent,
	parbox=false,
	boxsep=0pt,
	left=0pt,
	right=3mm,
	top=4pt,
	breakable,
	pad at break*=0mm,
	vfill before first,
	overlay unbroken={ %add if unbroken
		\draw
			[#1,line width=1pt]
			([xshift=-0.5pt,yshift=-1pt]frame.north east)
			--([xshift=-0.5pt]frame.south east)--(frame.south west); 
	},
	overlay first={
		\draw
			[#1,line width=1pt]
			([xshift=-0.5pt,yshift=-1pt]frame. north east)
			--([xshift=-0.5pt]frame.south east); 
		},
	overlay middle={ %to be added to middle parts of broken sequence
		\draw
			[#1,line width=1pt]
			([xshift=-0.5pt]frame.north east)
			--([xshift=-0.5pt]frame.south east); 
	},
	overlay last={ %add to last part of broken sequence
		\draw[#1,line width=1pt] ([xshift=-0.5pt]frame.north east)
		--([xshift=-0.5pt]frame.south east)--(frame.south west);
	},%
}




\colorlet{UNFINISHED}            {Fuchsia}
\colorlet{FINISHED}              {blue}
\colorlet{OPTIONAL}              {Cyan}
\colorlet{OPTIONALFINISHED}      {blue}
\colorlet{CHECKED}               {ForestGreen}


\newenvironment{newProblem}[2][FINISHED]
{ \begin{newProblemBLANK}{#1}{#2}}
{ \end{newProblemBLANK} }

\newenvironment{newInlineProblem}[2][FINISHED]
{ \begin{newInlineProblemBLANK}{#1}{#2}}
{ \end{newInlineProblemBLANK} }
